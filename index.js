import{i as r,A as Q,a as L,S as E,N as S,P as O,M as G,K as Y}from"./assets/vendor-DZSP-M6e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const p=document.querySelector(".backdrop-book-modal"),J=document.querySelector(".book-modal-close-btn"),X=document.querySelector(".book-img-container"),ee=document.querySelector(".book-modal-info"),te="https://books-backend.p.goit.global/";async function oe(e){try{const o=(await L.get(`${te}books/${e}`)).data;ne(o)}catch(t){r.error({title:"Error",message:"Error while querying",position:"topRight"}),console.error("Error while querying: ",t)}}function ne(e){X.innerHTML=`<img src="${e.book_image}" alt="${e.title}" class="book-img" loading="lazy"/>`,ee.innerHTML=`
  <h2 class="book-title">${e.title}</h2>
  <p class="book-author">${e.author}</p>
  <p class="book-price">$${e.price}</p>
  `}function se(){p.classList.remove("window-is-invisible"),document.body.classList.add("not-scrolling-page"),document.addEventListener("keydown",R)}J.addEventListener("click",q);p.addEventListener("click",e=>{e.target===p&&q()});function q(){p.classList.add("window-is-invisible"),document.body.classList.remove("not-scrolling-page"),document.removeEventListener("keydown",R)}function R(e){e.key==="Escape"&&q()}const C=document.querySelector("#quantity"),ie=document.querySelector(".neg-book-btn"),re=document.querySelector(".add-book-btn"),ce=document.querySelector(".add-to-cart-btn"),ae=document.querySelector(".buy-now-btn");function g(){return Number(C.value)}re.addEventListener("click",()=>{C.value=g()+1});ie.addEventListener("click",()=>{const e=g();e>1&&(C.value=e-1)});ce.addEventListener("click",e=>{e.preventDefault(),console.log("Number of selected books:",g()),r.success({title:"Success",message:`Added ${g()} book(s) to cart`,position:"topRight"})});ae.addEventListener("click",e=>{e.preventDefault(),r.info({title:"",message:"Thank you for your purchase",position:"topRight"})});new Q(".accordion-container",{duration:300,showMultiple:!0});const le=document.querySelector("#books-categories-desktop-list"),de=document.querySelector(".categories-dropdown-wrapper"),M=document.querySelector(".categories-dropdown-btn"),y=document.querySelector("#books-categories-dropdown-list"),m=document.querySelector(".books-list"),v=document.querySelector(".books-shown-quantity"),b=document.querySelector(".books-load-more");L.defaults.baseURL="https://books-backend.p.goit.global/books";let u=0,a=[],z="all";const F=4;function ue(){return window.innerWidth>=1440?24:10}function me(e){return e.map(t=>`
      <li class="book-list-item">
        <img
          class="book-item-img"
          src="${t.book_image}"
          alt="${t.title}"
          loading="lazy"
          onload="this.classList.add('loaded')"
          width="343"
          height="488"
        />
        <div class="book-item-description">
          <div class="book-description-text">
            <div class="book-title-and-author">
              <h3 class="book-item-title">${ye(t.title)||"No Title"}</h3>
              <p class="book-item-author">${t.author||"Unknown Author"}</p>
            </div>
            <p class="book-item-price">$${parseInt(t.price)}</p>
          </div>
          <button class="book-item-btn" type="button" data-book-id="${t._id}">
            Learn More
          </button>
        </div>
      </li>`).join("")}function fe(e=!1){if(!a.length){m.innerHTML="<li class='books-list-problem'>No books found</li>",v.textContent="0 books",b.classList.add("books-hidden");return}const t=a.slice(e?u-F:0,u),o=me(t);e?m.insertAdjacentHTML("beforeend",o):m.innerHTML=o,v.textContent=`Showing ${Math.min(u,a.length)} of ${a.length} books`,b.classList.toggle("books-hidden",u>=a.length)}function ke(e){let t='<li class="category-list-item active" data-category-name="all">All categories</li>';return e.forEach(o=>{var i;(i=o.list_name)!=null&&i.trim()&&(t+=`<li class="category-list-item" data-category-name="${o.list_name}">${o.list_name}</li>`)}),t}function be(e,t){const o=e.querySelector(".category-list-item.active");o&&o.classList.remove("active"),t.classList.add("active")}function pe(e,t=!1){e.querySelectorAll(".category-list-item").forEach(o=>{o.addEventListener("click",i=>{if(be(e,i.target),x(i.target.dataset.categoryName),t){const n=M.querySelector(".categories-dropdown-text");n.textContent=i.target.textContent,e.classList.add("books-hidden")}})})}async function ge(){const e=window.innerWidth<1440,t=e?y:le;t.innerHTML="<li>Loading categories...</li>";try{const{data:o}=await L.get("/category-list"),i=ke(o);if(t.innerHTML=i,pe(t,e),e){const n=M.querySelector(".categories-dropdown-text"),s=t.querySelector(".category-list-item.active");n.textContent=(s==null?void 0:s.textContent)||"All categories"}}catch{t.innerHTML="<li>Error loading categories</li>"}}async function x(e,t=!1){t?u+=F:(m.innerHTML="<li class='books-list-problem'>Loading books...</li>",v.textContent="",b.classList.add("books-hidden"),u=ue(),a=[],z=e);const o=e==="all"?"/top-books":`/category?category=${e}`;try{if(!a.length||!t){const{data:i}=await L.get(o);let n=[];e==="all"?i.forEach(c=>{var f;(f=c.books)!=null&&f.length&&n.push(...c.books)}):n=i;const s=new Set;a=n.filter(c=>{const f=(c.title||"").toLowerCase().trim();return s.has(f)?!1:(s.add(f),!0)})}fe(t)}catch{m.innerHTML="<li class='books-list-problem'>Error loading books</li>",v.textContent="Error",b.classList.add("books-hidden")}}function ye(e){return e?e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):""}b.addEventListener("click",()=>x(z,!0));M.addEventListener("click",()=>y.classList.toggle("books-hidden"));document.addEventListener("click",e=>{!de.contains(e.target)&&!y.classList.contains("books-hidden")&&y.classList.add("books-hidden")});m.addEventListener("click",async e=>{if(!e.target.classList.contains("book-item-btn"))return;const t=e.target.dataset.bookId;await oe(t),se()});async function ve(){try{await Promise.all([ge(),x("all")])}catch(e){console.error("Initialization error:",e)}}ve();const h=document.querySelector(".backdrop-contact-modal"),he=document.querySelector(".modal-close-btn"),Le=document.querySelector(".contact-modal-text");function we(e){Le.textContent=e,h.classList.remove("window-is-invisible"),document.body.classList.add("not-scrolling-page"),document.addEventListener("keydown",K)}he.addEventListener("click",B);h.addEventListener("click",e=>{e.target===h&&B()});function B(){h.classList.add("window-is-invisible"),document.body.classList.remove("not-scrolling-page"),document.removeEventListener("keydown",K)}function K(e){e.key==="Escape"&&B()}const k=document.querySelector(".contact-modal-form");k.addEventListener("submit",e=>{e.preventDefault();const t=k.elements.name.value.trim().toLowerCase(),o=k.elements.email.value.trim().toLowerCase(),i=k.elements.message.value.trim().toLowerCase();if(!t||!o){r.error({title:"Error",message:"Please, fill in the Name and Email fields!",position:"topRight"});return}r.success({title:"Congratulations!",message:"Data sent. Have a nice day)",position:"topRight"}),console.log({name:t,email:o,message:i}),k.reset()});new E(".events-swiper",{modules:[S,O],spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".events-button-next",prevEl:".events-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0},grabCursor:!0,breakpoints:{375:{slidesPerView:1},768:{slidesPerView:2},1440:{slidesPerView:3}}});const Ee=document.querySelector(".events-list");Ee.addEventListener("click",e=>{const t=e.target.closest(".event-btn");if(!t)return;const o=t.closest(".event-item");if(!o)return;const i=o.querySelector(".event-subtitle").textContent;we(i)});const $=document.querySelector(".hero-button-prev"),A=document.querySelector(".hero-button-next");function U(e){e&&window.requestAnimationFrame(()=>e.blur())}$&&$.addEventListener("click",function(){U(this)});A&&A.addEventListener("click",function(){U(this)});const P=new E(".swiper-div",{modules:[S,O,G],loop:!1,spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".feedbacks-button-next",prevEl:".feedbacks-button-prev",addIcons:!1},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:{forceToAxis:!0},simulateTouch:!0,breakpoints:{0:{slidesPerView:1},768:{slidesPerView:2},1440:{slidesPerView:3}}}),Se=document.querySelector(".feedbacks");Se.addEventListener("keydown",e=>{e.key==="Tab"&&(e.preventDefault(),e.shiftKey?P.slidePrev():P.slideNext())});const I=document.querySelector(".feedbacks-button-prev"),D=document.querySelector(".feedbacks-button-next");function W(e){e&&window.requestAnimationFrame(()=>e.blur())}I&&I.addEventListener("click",function(){W(this)});D&&D.addEventListener("click",function(){W(this)});const w=document.querySelector(".open-menu"),l=document.querySelector(".close-menu"),d=document.querySelector(".mob-menu"),H=document.querySelectorAll(".menu-link"),qe=document.querySelectorAll(".header-link"),j=window.matchMedia("(max-width: 768px)").matches,T=e=>{e.preventDefault();const t=e.currentTarget.getAttribute("href"),o=document.querySelector(t);o&&o.scrollIntoView({behavior:"smooth",block:"start"}),e.currentTarget.blur()};if(d&&j){const e=s=>{s.key==="Escape"&&n()},t=s=>{s.target===d&&n()},o=s=>{T(s),s.currentTarget.classList.contains("menu-link")&&n()},i=()=>{d.classList.add("is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",e),d.addEventListener("click",t),l==null||l.addEventListener("click",n),H.forEach(s=>s.addEventListener("click",o))},n=()=>{d.classList.remove("is-open"),document.body.style.overflow="",document.removeEventListener("keydown",e),d.removeEventListener("click",t),l==null||l.removeEventListener("click",n),H.forEach(s=>s.removeEventListener("click",o))};w==null||w.addEventListener("click",i)}j||qe.forEach(e=>e.addEventListener("click",T));const N=document.querySelector("#footerMail"),Ce=document.querySelector("#formFooter"),Me=document.querySelectorAll(".footer-anchor-link");Me.forEach(e=>e.addEventListener("click",T));const xe=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;Ce.addEventListener("submit",e=>{e.preventDefault(),r.destroy();const t=N.value.trim().toLowerCase();if(t===""){r.show({message:"Поле e-mail не може бути порожнім!",color:"red",timeout:5e3,position:"center"});return}if(!xe.test(t)){r.show({message:"Некоректний e-mail!",color:"red",timeout:2500,position:"center"});return}r.show({message:`Дякуємо, ваш e-mail "${t}" успішно відправлено!`,color:"green",timeout:4e3,position:"center"}),N.value=""});new E(".hero-slider",{modules:[S,Y],slidesPerView:1,slidesPerGroup:1,keyboard:{enabled:!0,onlyInViewport:!0},navigation:{nextEl:".hero-button-next",prevEl:".hero-button-prev"}});const V=document.querySelector(".hero-button-prev"),_=document.querySelector(".hero-button-next");function Z(e){e&&window.requestAnimationFrame(()=>e.blur())}V&&V.addEventListener("click",function(){Z(this)});_&&_.addEventListener("click",function(){Z(this)});
//# sourceMappingURL=index.js.map
