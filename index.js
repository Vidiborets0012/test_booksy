const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-B-QIMh_v.js","assets/vendor-CjlD8ohb.css"])))=>i.map(i=>d[i]);
import{a as b,A as ee,b as S,S as M,N as T,P as F,M as te,K as oe}from"./assets/vendor-B-QIMh_v.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const g=document.querySelector(".backdrop-book-modal"),ne=document.querySelector(".book-modal-close-btn"),se=document.querySelector(".book-img-container"),re=document.querySelector(".book-modal-info"),ie="https://books-backend.p.goit.global/";async function ce(e){try{const n=(await S.get(`${ie}books/${e}`)).data;ae(n)}catch(t){b.error({title:"Error",message:"Error while querying",position:"topRight"}),console.error("Error while querying: ",t)}}function ae(e){se.innerHTML=`<img src="${e.book_image}" alt="${e.title}" class="book-img" loading="lazy"/>`,re.innerHTML=`
  <h2 class="book-title">${e.title}</h2>
  <p class="book-author">${e.author}</p>
  <p class="book-price">$${e.price}</p>
  `}function le(){g.classList.remove("window-is-invisible"),document.body.classList.add("not-scrolling-page"),document.addEventListener("keydown",K)}ne.addEventListener("click",x);g.addEventListener("click",e=>{e.target===g&&x()});function x(){g.classList.add("window-is-invisible"),document.body.classList.remove("not-scrolling-page"),document.removeEventListener("keydown",K)}function K(e){e.key==="Escape"&&x()}const A=document.querySelector("#quantity"),de=document.querySelector(".neg-book-btn"),ue=document.querySelector(".add-book-btn"),me=document.querySelector(".add-to-cart-btn"),fe=document.querySelector(".buy-now-btn");function v(){return Number(A.value)}ue.addEventListener("click",()=>{A.value=v()+1});de.addEventListener("click",()=>{const e=v();e>1&&(A.value=e-1)});me.addEventListener("click",e=>{e.preventDefault(),console.log("Number of selected books:",v()),b.success({title:"Success",message:`Added ${v()} book(s) to cart`,position:"topRight"})});fe.addEventListener("click",e=>{e.preventDefault(),b.info({title:"",message:"Thank you for your purchase",position:"topRight"})});new ee(".accordion-container",{duration:300,showMultiple:!0});const be=document.querySelector("#books-categories-desktop-list"),pe=document.querySelector(".categories-dropdown-wrapper"),P=document.querySelector(".categories-dropdown-btn"),h=document.querySelector("#books-categories-dropdown-list"),p=document.querySelector(".books-list"),L=document.querySelector(".books-shown-quantity"),k=document.querySelector(".books-load-more");S.defaults.baseURL="https://books-backend.p.goit.global/books";let w=0,d=[],W="all";const ke=4;function ye(){return window.innerWidth>=1440?24:10}function ge(){if(!d.length){p.innerHTML="<li class='books-list-problem'>No books found</li>",L.textContent="0 books",k.classList.add("books-hidden");return}const e=d.slice(0,w);p.innerHTML=e.map(t=>`
      <li class="book-list-item">
          <img class="book-item-img" src="${t.book_image}" alt="${t.title}" loading="lazy"/>
          <div class="book-item-description">
            <div class="book-description-text">
              <div class="book-title-and-author">
                <h3 class="book-item-title">${Ee(t.title)||"No Title"}</h3>
                <p class="book-item-author">${t.author||"Unknown Author"}</p>
              </div>
              <p class="book-item-price">$${parseInt(t.price)}</p>
            </div>
            <button class="book-item-btn" type="button" data-book-id="${t._id}">Learn More</button>
          </div>
      </li>
  `).join(""),L.textContent=`Showing ${e.length} of ${d.length} books`,k.classList.toggle("books-hidden",w>=d.length)}function ve(e){let t='<li class="category-list-item active" data-category-name="all">All categories</li>';return e.forEach(n=>{var r;(r=n.list_name)!=null&&r.trim()&&(t+=`<li class="category-list-item" data-category-name="${n.list_name}">${n.list_name}</li>`)}),t}function he(e,t){const n=e.querySelector(".category-list-item.active");n&&n.classList.remove("active"),t.classList.add("active")}function Le(e,t=!1){e.querySelectorAll(".category-list-item").forEach(n=>{n.addEventListener("click",r=>{if(he(e,r.target),$(r.target.dataset.categoryName),t){const o=P.querySelector(".categories-dropdown-text");o.textContent=r.target.textContent,e.classList.add("books-hidden")}})})}async function we(){const e=window.innerWidth<1440,t=e?h:be;t.innerHTML="<li>Loading categories...</li>";try{const{data:n}=await S.get("/category-list"),r=ve(n);if(t.innerHTML=r,Le(t,e),e){const o=P.querySelector(".categories-dropdown-text"),s=t.querySelector(".category-list-item.active");o.textContent=(s==null?void 0:s.textContent)||"All categories"}}catch{t.innerHTML="<li>Error loading categories</li>"}}async function $(e,t=!1){t?w+=ke:(p.innerHTML="<li class='books-list-problem'>Loading books...</li>",L.textContent="",k.classList.add("books-hidden"),w=ye(),d=[],W=e);const n=e==="all"?"/top-books":`/category?category=${e}`;try{if(!d.length||!t){const{data:r}=await S.get(n);let o=[];e==="all"?r.forEach(i=>{var c;(c=i.books)!=null&&c.length&&o.push(...i.books)}):o=r;const s=new Set;d=o.filter(i=>{const c=(i.title||"").toLowerCase().trim();return s.has(c)?!1:(s.add(c),!0)})}ge()}catch{p.innerHTML="<li class='books-list-problem'>Error loading books</li>",L.textContent="Error",k.classList.add("books-hidden")}}function Ee(e){return e?e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):""}k.addEventListener("click",()=>$(W,!0));P.addEventListener("click",()=>h.classList.toggle("books-hidden"));document.addEventListener("click",e=>{!pe.contains(e.target)&&!h.classList.contains("books-hidden")&&h.classList.add("books-hidden")});p.addEventListener("click",async e=>{if(!e.target.classList.contains("book-item-btn"))return;const t=e.target.dataset.bookId;le(),await ce(t)});we().then(()=>$("all"));const E=document.querySelector(".backdrop-contact-modal"),Se=document.querySelector(".modal-close-btn"),qe=document.querySelector(".contact-modal-text");function Ce(e){qe.textContent=e,E.classList.remove("window-is-invisible"),document.body.classList.add("not-scrolling-page"),document.addEventListener("keydown",j)}Se.addEventListener("click",B);E.addEventListener("click",e=>{e.target===E&&B()});function B(){E.classList.add("window-is-invisible"),document.body.classList.remove("not-scrolling-page"),document.removeEventListener("keydown",j)}function j(e){e.key==="Escape"&&B()}const f=document.querySelector(".contact-modal-form");f.addEventListener("submit",e=>{e.preventDefault();const t=f.elements.name.value.trim().toLowerCase(),n=f.elements.email.value.trim().toLowerCase(),r=f.elements.message.value.trim().toLowerCase();if(!t||!n){b.error({title:"Error",message:"Please, fill in the Name and Email fields!",position:"topRight"});return}b.success({title:"Congratulations!",message:"Data sent. Have a nice day)",position:"topRight"}),console.log({name:t,email:n,message:r}),f.reset()});new M(".events-swiper",{modules:[T,F],spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".events-button-next",prevEl:".events-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0},grabCursor:!0,breakpoints:{375:{slidesPerView:1},768:{slidesPerView:2},1440:{slidesPerView:3}}});const Me=document.querySelector(".events-list");Me.addEventListener("click",e=>{const t=e.target.closest(".event-btn");if(!t)return;const n=t.closest(".event-item");if(!n)return;const r=n.querySelector(".event-subtitle").textContent;Ce(r)});const _=new M(".swiper-div",{modules:[T,F,te],loop:!1,spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".feedbacks-button-next",prevEl:".feedbacks-button-prev",addIcons:!1},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:{forceToAxis:!0},simulateTouch:!0,breakpoints:{0:{slidesPerView:1},768:{slidesPerView:2},1440:{slidesPerView:3}}}),Te=document.querySelector(".feedbacks");Te.addEventListener("keydown",e=>{e.key==="Tab"&&(e.preventDefault(),e.shiftKey?_.slidePrev():_.slideNext())});const D=document.querySelector(".feedbacks-button-prev"),N=document.querySelector(".feedbacks-button-next");function Z(e){e&&window.requestAnimationFrame(()=>e.blur())}D&&D.addEventListener("click",function(){Z(this)});N&&N.addEventListener("click",function(){Z(this)});const xe="modulepreload",Ae=function(e){return"/test_booksy/"+e},O={},V=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(a=>{if(a=Ae(a),a in O)return;O[a]=!0;const y=a.endsWith(".css"),Y=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${Y}`))return;const l=document.createElement("link");if(l.rel=y?"stylesheet":xe,y||(l.as="script"),l.crossOrigin="",l.href=a,c&&l.setAttribute("nonce",c),document.head.appendChild(l),y)return new Promise((J,X)=>{l.addEventListener("load",J),l.addEventListener("error",()=>X(new Error(`Unable to preload CSS for ${a}`)))})}))}function s(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return o.then(i=>{for(const c of i||[])c.status==="rejected"&&s(c.reason);return t().catch(s)})},q=document.querySelector(".open-menu"),u=document.querySelector(".close-menu"),m=document.querySelector(".mob-menu"),R=document.querySelectorAll(".menu-link"),Pe=document.querySelectorAll(".header-link"),Q=window.matchMedia("(max-width: 768px)").matches,I=e=>{e.preventDefault();const t=e.currentTarget.getAttribute("href"),n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth",block:"start"}),e.currentTarget.blur()};if(m&&Q){const e=s=>{s.key==="Escape"&&o()},t=s=>{s.target===m&&o()},n=s=>{I(s),s.currentTarget.classList.contains("menu-link")&&o()},r=()=>{m.classList.add("is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",e),m.addEventListener("click",t),u==null||u.addEventListener("click",o),R.forEach(s=>s.addEventListener("click",n))},o=()=>{m.classList.remove("is-open"),document.body.style.overflow="",document.removeEventListener("keydown",e),m.removeEventListener("click",t),u==null||u.removeEventListener("click",o),R.forEach(s=>s.removeEventListener("click",n))};q==null||q.addEventListener("click",r)}Q||Pe.forEach(e=>e.addEventListener("click",I));const H=document.querySelector("#footerMail"),$e=document.querySelector("#formFooter"),Be=document.querySelectorAll(".footer-anchor-link");Be.forEach(e=>e.addEventListener("click",I));const Ie=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;async function C({message:e,color:t="green",timeout:n=3e3}){const[{default:r}]=await Promise.all([V(()=>import("./assets/vendor-B-QIMh_v.js").then(o=>o.i),__vite__mapDeps([0,1])),V(()=>import("./assets/vendor-B-QIMh_v.js").then(o=>o.c),__vite__mapDeps([0,1]))]);r.destroy(),r.show({message:e,color:t,timeout:n,position:"center"})}$e.addEventListener("submit",async e=>{e.preventDefault();const t=H.value.trim().toLowerCase();if(t===""){await C({message:"Поле e-mail не може бути порожнім!",color:"red",timeout:5e3});return}if(!Ie.test(t)){await C({message:"Некоректний e-mail!",color:"red",timeout:2500});return}await C({message:`Дякуємо, ваш e-mail "${t}" успішно відправлено!`,color:"green",timeout:4e3}),H.value=""});new M(".hero-slider",{modules:[T,oe],slidesPerView:1,slidesPerGroup:1,keyboard:{enabled:!0,onlyInViewport:!0},navigation:{nextEl:".hero-button-next",prevEl:".hero-button-prev"}});const U=document.querySelector(".hero-button-prev"),z=document.querySelector(".hero-button-next");function G(e){e&&window.requestAnimationFrame(()=>e.blur())}U&&U.addEventListener("click",function(){G(this)});z&&z.addEventListener("click",function(){G(this)});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".location"),t=e.querySelector("iframe");if(!t)return;const n=t.src;t.removeAttribute("src"),t.setAttribute("data-src",n),t.style.opacity="0",t.style.transition="opacity 0.2s ease",new IntersectionObserver((o,s)=>{o.forEach(i=>{i.isIntersecting&&(t.src=t.dataset.src,t.onload=()=>t.style.opacity="1",s.disconnect())})}).observe(e)});
//# sourceMappingURL=index.js.map
